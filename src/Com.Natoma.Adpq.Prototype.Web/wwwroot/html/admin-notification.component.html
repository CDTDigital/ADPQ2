<div class="admin-notifs">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <h3>Please enter the information needed for your notification.</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8 col-md-offset-2">

            <form class="notif-form" (ngSubmit)="onSubmit(true)" #notifForm="ngForm">
                <div class="form-group row">
                    <label for="user-fname-input" class="col-md-2 col-form-label">Notification Type</label>
                    <div class="col-md-6">
                        <p-dropdown required [options]="notifTypes" [(ngModel)]="notification.geoType" [style]="{'width':'100px'}" name="admin-geo-notif-dd" #adminNotifGeo></p-dropdown>
                    </div>
                </div>

                <div *ngIf="notification.geoType == 1">

                    <div class="form-group row">
                        <label for="admin-ref-street-input" class="col-md-2 col-form-label col-md-offset-2">Street</label>
                        <div class="col-md-4">
                            <input pInputText class="form-control" type="text" value="" required [(ngModel)]="notification.refStreet" name="admin-ref-street-input" #adminRefStreet="ngModel">
                        </div>
                        <div [hidden]="adminRefStreet.valid || adminRefStreet.pristine" class="col-md-4 alert alert-danger"> Street is required </div>
                    </div>

                    <div class="form-group row">
                        <label for="admin-ref-city-input" class="col-md-2 col-form-label col-md-offset-2">City</label>
                        <div class="col-md-4">
                            <input pInputText class="form-control" type="text" value="" required [(ngModel)]="notification.refCity" name="admin-ref-city-input" #adminRefCity="ngModel">
                        </div>
                        <div [hidden]="adminRefCity.valid || adminRefCity.pristine" class="col-md-4 alert alert-danger"> Street is required </div>
                    </div>

                    <div class="form-group row">
                        <label for="admin-ref-street-input" class="col-md-2 col-form-label col-md-offset-2">Zip</label>
                        <div class="col-md-2">
                            <input pInputText class="form-control" type="text" value="" required [(ngModel)]="notification.refZip" name="admin-ref-street-input" #adminRefZip="ngModel">
                        </div>
                        <div [hidden]="adminRefZip.valid || adminRefZip.pristine" class="col-md-4 alert alert-danger"> ZIP is required </div>
                    </div>

                    <div class="form-group row">
                        <label for="admin-radius-dd" class="col-md-4 col-form-label">Send to residents within selected radius</label>
                        <div class="col-md-2">
                            <p-dropdown required [options]="radiuses" [(ngModel)]="notification.radius" [style]="{'width':'75px'}" name="admin-radius-dd" #adminNotifRadius></p-dropdown>
                        </div>
                    </div>

                </div>

                <div class="form-group row">
                    <label for="user-email-subj-input" class="col-md-2 col-form-label">Email Subject</label>
                    <div class="col-md-6">
                        <input [disabled]="isEmailDisabled" pInputText class="form-control" type="text" value="" required [(ngModel)]="notification.emailSubject" name="user-email-subj-input" #adminEmailSubj="ngModel">
                    </div>
                    <div [hidden]="isEmailDisabled || adminEmailSubj.valid || adminEmailSubj.pristine" class="col-md-4 alert alert-danger"> Subject is required </div>
                </div>

                <div class="form-group row">
                    <label for="user-smail-subj-input" class="col-md-2 col-form-label">Email Message</label>
                    <div class="col-md-10">
                        <div *ngIf="isEmailDisabled" class="block-editor"></div>
                        <p-editor [class.disabled]="isEmailDisabled"
                                  (onTextChange)="onEditorTextChange()" name="user-smail-subj-input" [(ngModel)]="notification.emailMessage" [style]="{'height':'320px'}"></p-editor>
                    </div>
                    <div class="row">
                        <div class="notif-msg-err col-md-4 col-md-offset-2">
                            <div [hidden]="isEmailDisabled || !textWasEnteredIntoEditor || notification.emailMessage" class="alert alert-danger"> Message is required </div>
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="user-sms-subj-input" class="col-md-2 col-form-label">Text Message</label>
                    <div class="col-md-6">
                        <input pInputText class="form-control" type="text" value="" required [disabled]="notification.emailMessage || notification.emailSubject != ''"
                               [(ngModel)]="notification.textMessage" name="user-sms-subj-input" #adminSmsSubj="ngModel">
                    </div>
                    <div [hidden]="adminSmsSubj.valid || adminSmsSubj.pristine || adminSmsSubj.disabled" class="col-md-4 alert alert-danger"> Text Message is required </div>
                </div>
                
                <button type="submit" pButton icon="fa fa-check" label="Send" [disabled]="!notifForm.form.valid || (notifForm.form.valid && !notification.emailMessage)"></button>
                <button type="button" pButton icon="fa fa-close" (click)="onSubmit(false)" label="Cancel"></button>
            </form>

        </div>
    </div>
</div>